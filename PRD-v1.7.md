# PosterLab PRD v1.7

> **æ¨¡å¼**ï¼šCanvas-only åˆ›æ„å·¥ä½œå°  
> **æ ¸å¿ƒç»„ä»¶**ï¼šText Card (Notes/Brief) + Upload Image + Image Studio + Group Frameï¼ˆé€‰æ¡†å®¹å™¨ï¼‰  
> **æ ¸å¿ƒæœºåˆ¶**ï¼šè¿çº¿ç”Ÿæ•ˆ + ç±»å‹åŒ–è¾“å…¥/è¾“å‡ºå£ + Context è¾“å‡ºï¼ˆå›¾+å‚æ•°+æ–‡æœ¬ï¼‰  
> **åº•çº¿çº¦æŸ**ï¼šImage Studio æ˜¯ç”Ÿæˆç«¯ï¼›Group æ˜¯é€‰æ¡†å®¹å™¨ï¼Œä¸æ˜¯å¤§å¡ç‰‡

---

## 0. ä¸€å¥è¯å®šä¹‰

åœ¨æ— é™ç”»å¸ƒé‡Œï¼Œç”¨ **Text Card**ï¼ˆéœ€æ±‚ï¼‰+ **Upload Image**ï¼ˆè¾“å…¥åŒ…è£…ï¼‰+ **Image Studio**ï¼ˆç”Ÿæˆç«¯ï¼‰+ **Group Frame**ï¼ˆé€‰æ¡†å®¹å™¨ï¼‰å®Œæˆé£æ ¼æç‚¼ã€å‚è€ƒç»„ç»‡ã€æ‰¹é‡å‡ºå›¾ã€å…ƒç´ æå–ä¸å¯¼å‡ºã€‚

---

## 1. ç»„ä»¶æ€»è§ˆ

| ç»„ä»¶ | èŒè´£ | è¾“å…¥ | è¾“å‡º |
|------|------|------|------|
| **Text Card** | éœ€æ±‚æè¿° | - | Brief Token (è¿æ¥æ—¶) |
| **Upload Image** | å¤–éƒ¨å›¾ç‰‡è¾“å…¥åŒ…è£… | drop/paste | Image Out, Context Out |
| **Image Studio** | ä¸»ç”Ÿæˆç«¯ï¼ˆæ–‡ç”Ÿå›¾/å›¾ç”Ÿå›¾ï¼‰ | Brief In, Style In, RefSet In, Image In | Image Out, Context Out |
| **Group Frame** | é€‰æ¡†å®¹å™¨ï¼ˆæ¨¡æ¿åŒ–è¿è¡Œï¼‰ | æ¡†å†…èŠ‚ç‚¹ | Style/RefSet/Candidates/Elements Token |

---

## 2. Text Cardï¼ˆç²¾ç®€ç‰ˆï¼‰

### 2.1 è§’è‰²ï¼ˆä»…ä¸¤ç§ï¼‰

| Role | è¯´æ˜ |
|------|------|
| **Notes** | çº¯ç¬”è®°ï¼Œä¸å‚ä¸æ‰§è¡Œï¼ˆé™¤éæ‰‹åŠ¨è¿æ¥è¾“å…¥å£ï¼‰ |
| **Brief** | ç»“æ„åŒ–éœ€æ±‚ï¼šTitle / Subtitle / Info / Size / Tone / Constraints chips |

> **Prompt è§’è‰²å·²ç§»é™¤**ã€‚æ–‡ç”Ÿå›¾ prompt çš„ç¼–è¾‘ä¸»åœºåœ¨ Image Studio å¡ã€‚

### 2.2 Brief â†’ Image Studio è”åŠ¨

- Brief é€šè¿‡ **Brief In** è¿æ¥åˆ° Image Studio
- Image Studio è‡ªåŠ¨å°† brief ç¼–è¯‘è¿› promptï¼ˆå¡å†…æ˜¾ç¤º"Compiled Brief"åªè¯»æ‘˜è¦ï¼‰
- çº¦æŸ chipsï¼ˆç¦ç”¨è¯/å“ç‰Œè‰²/å¯†åº¦ï¼‰åœ¨ç¼–è¯‘å±‚ç”Ÿæ•ˆï¼Œç”¨æˆ·æ— éœ€æ‰‹å†™ prompt

### 2.3 è¾“å‡ºå£

- **Brief Token Out**ï¼ˆä»… Brief è§’è‰²ï¼‰ï¼šä¾›ä¸‹æ¸¸ Image Studio / Group ä½¿ç”¨

---

## 3. Upload Imageï¼ˆè¾“å…¥åŒ…è£…å¡ï¼‰

### 3.1 èŒè´£

åªè´Ÿè´£"æŠŠå¤–éƒ¨å›¾ç‰‡åŒ…è£…æˆèŠ‚ç‚¹"ï¼Œé»˜è®¤ä½œä¸ºè¾“å…¥ä½¿ç”¨ã€‚

### 3.2 å¡ç‰‡ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â–« Upload Image          â˜… ğŸ”’  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                 â”‚
â”‚     [ Drop or Paste Image ]    â”‚
â”‚                                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Caption: ___________________   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â—‹ Image Out    â—‹ Context Out
```

### 3.3 è¾“å‡ºå£

| è¾“å‡º | å†…å®¹ |
|------|------|
| **Image Out** | å›¾ç‰‡æœ¬èº« |
| **Context Out** | `{ image, caption, source: 'upload' }` |

---

## 4. Image Studioï¼ˆæ ¸å¿ƒç”Ÿæˆå¡ï¼‰

### 4.1 èŒè´£

ä¸»ç”Ÿæˆç«¯ï¼šæ–‡ç”Ÿå›¾ã€å›¾ç”Ÿå›¾ã€è¿­ä»£ä¼˜åŒ–ã€‚ç”Ÿæˆåå†…å®¹å¯ä½œä¸ºä¸‹æ¸¸è¾“å…¥ç»§ç»­ä¸²è”ã€‚

### 4.2 çŠ¶æ€æœº

| State | è¯´æ˜ | UI è¡¨ç° |
|-------|------|---------|
| **Empty** | æ— å›¾ã€æ— ç»“æœ | æ˜¾ç¤º Prompt ç¼–è¾‘åŒºï¼ˆé»˜è®¤ï¼‰ |
| **Draft** | æœ‰ prompt/å‚æ•°ä½†æœªç”Ÿæˆ | å¯ç‚¹ â–¶ Run |
| **Generated** | å·²æœ‰ 1..N å¼ ç»“æœ | æ˜¾ç¤ºç»“æœç½‘æ ¼ + ç»§ç»­è¿­ä»£ |
| **Pinned** | ç”¨æˆ·é€‰å®šæŸå¼ ä¸º"ä¸»å›¾" | ä¸»å›¾çªå‡ºï¼Œå…¶ä»–ç»“æœå¯å±•å¼€ |
| **Locked/Favorite** | ç»ˆç¨¿æ ‡è®° | â˜… / ğŸ”’ çŠ¶æ€æ ‡è¯† |

### 4.3 å¡ç‰‡ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â—† Image Studio              idle â˜… ğŸ”’ â–¾ â€¦ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â–¸ Prompt â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â”‚ A cinematic poster for...              â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
â”‚ â–¸ Negative (æŠ˜å )                          â”‚
â”‚ â–¸ Compiled Brief (åªè¯»ï¼Œæ¥è‡ª Brief In)     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Quick Controls â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ [Model â–¾] [3:2 â–¾] [2K â–¾] [Ã—4] [âš™] [â–¶ Run] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Results â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
â”‚ â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”                   â”‚
â”‚ â”‚ 1 â”‚ â”‚ 2 â”‚ â”‚ 3 â”‚ â”‚ 4 â”‚  [Pin] [Var] ... â”‚
â”‚ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â˜‘ Use current image as input  [0.7 â”€â”€â”€â—] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â—‹ Brief In   â—‹ Style In   â—‹ RefSet In   â—‹ Image In
                     â—‹ Image Out    â—‹ Context Out
```

### 4.4 Quick Controlsï¼ˆæ§åˆ¶æ¡ï¼‰

| æ§ä»¶ | è¯´æ˜ |
|------|------|
| Model dropdown | Seedream 4.5 / SDXL / ... |
| Ratio dropdown | 1:1 / 3:2 / 9:16 / 16:9 / Custom |
| Resolution dropdown | 1K / 2K / 4K |
| Count stepper | 1 / 4 / 12 / 24 |
| âš™ é«˜çº§ | seed, cfg, steps, style strength, img2img strength |
| â–¶ Run | æ‰§è¡Œç”Ÿæˆ |

### 4.5 Results åŒº

- ç½‘æ ¼å±•ç¤º N å¼ ç»“æœ
- æ”¯æŒï¼šå¤šé€‰ã€æ’åºï¼ˆæœ€è¿‘/ç›¸ä¼¼åº¦/è¯„åˆ†ï¼‰
- æ“ä½œï¼š**Pin**ï¼ˆè®¾ä¸»å›¾ï¼‰/ **Variations** / **Extract Elements** / **Send to Group**

### 4.6 è¾“å…¥å£

| è¾“å…¥ | æ¥æº |
|------|------|
| **Brief In** | Text Card (Brief) |
| **Style In** | Group Frame (Style Token) |
| **RefSet In** | Group Frame (RefSet Token) |
| **Image In** | Upload Image / å¦ä¸€ä¸ª Image Studio |

### 4.7 è¾“å‡ºå£ï¼ˆå…³é”®ï¼šåŒè¾“å‡ºï¼‰

| è¾“å‡º | å†…å®¹ |
|------|------|
| **Image Out** | ä¸»å›¾ï¼ˆPinnedï¼‰æˆ–é€‰ä¸­å›¾é›†åˆ |
| **Context Out** | `{ images, prompt, negative, params: { model, ratio, resolution, seed, cfg, steps }, source: 'studio' }` |

> Context Out ä½¿ä¸‹æ¸¸å¯å¤ç°/ç»Ÿä¸€é£æ ¼/ç»§ç»­è¿­ä»£ã€‚

### 4.8 Img2Img æ¨¡å¼ï¼ˆåŒä¸€å¼ å¡æ—¢æ˜¯è¾“å‡ºç«¯ä¹Ÿæ˜¯è¾“å…¥ç«¯ï¼‰

å¡å†…å¼€å…³ï¼š
- **Use current image as input**ï¼ˆå¼€ï¼‰
- **Strength slider**ï¼ˆ0~1ï¼‰
- **Mask**ï¼ˆå¯åç½®ï¼‰

---

## 5. Group Frameï¼ˆé€‰æ¡†å®¹å™¨ï¼‰

### 5.1 è®¾è®¡åŸåˆ™

> **Group æ˜¯é€‰æ¡†å®¹å™¨ï¼Œä¸æ˜¯å¤§å¡ç‰‡ã€‚**

åƒ Figma çš„ Frameï¼š
- åªç”»ä¸€ä¸ªåŠé€æ˜æ¡† + é¡¶éƒ¨å°æ ‡é¢˜æ¡
- ä¸éœ€è¦"æŠŠä¸œè¥¿æ‹–è¿›å¤§å¡ç‰‡é‡Œ"
- æ¡†å†…èŠ‚ç‚¹è‡ªåŠ¨åŠ å…¥ Group

### 5.2 åˆ›å»ºæ–¹å¼

1. å·¥å…·æ ç‚¹ **Group** â†’ è¿›å…¥**æ¡†é€‰æ¨¡å¼**
2. åœ¨ç”»å¸ƒä¸Šæ‹–æ‹½æ‹‰ä¸€ä¸ªçŸ©å½¢æ¡†
3. æ¡†å†…ç°æœ‰èŠ‚ç‚¹è‡ªåŠ¨åŠ å…¥ Group
4. åç»­èŠ‚ç‚¹æ‹–å…¥/æ‹–å‡ºå³åŠ å…¥/ç§»é™¤

### 5.3 å‘ˆç°

```
â”Œâ”€ Style Extract â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â–¶ âš™ â€¦ â”€â”
â”‚                                          â”‚
â”‚   [Upload]  [Upload]  [Image Studio]    â”‚
â”‚                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â—‹ Style Token Out
```

- **åŠé€æ˜æ¡†** + é¡¶éƒ¨æ ‡é¢˜æ¡
- æ ‡é¢˜æ¡åŒ…å«ï¼šGroup ç±»å‹ / Auto-run å¼€å…³ / â–¶ Run / â€¦ï¼ˆé…ç½®/åˆ é™¤ï¼‰

### 5.4 Group æ¨¡æ¿ç±»å‹

| ç±»å‹ | è¾“å…¥ï¼ˆæ¡†å†…èŠ‚ç‚¹ï¼‰ | è¾“å‡º |
|------|------------------|------|
| **Style Extract** | Upload Image / Image Studioï¼ˆå·²ç”Ÿæˆï¼‰ | Style Token Out |
| **RefSet** | å›¾ç‰‡èŠ‚ç‚¹ | RefSet Token Out |
| **Candidates** | candidate å›¾ | Candidates Token Out |
| **Elements** | element å›¾ | Elements Token Out |
| **Blank** | ä»»æ„ï¼ˆä»…åˆ†ç»„ï¼‰ | - |

### 5.5 Group Promptï¼ˆå¯é€‰ï¼‰

- æ ‡é¢˜æ¡ `â€¦` èœå•é‡Œçš„ **Group Prompt**
- é»˜è®¤ç©ºï¼ˆèµ°æ¨¡æ¿å†…ç½®è§„åˆ™ï¼‰
- å¡«å†™åä½œä¸ºæ¨¡æ¿çš„é¢å¤–æŒ‡ä»¤

---

## 6. Dock å·¥å…·æ ï¼ˆæ›´æ–°ï¼‰

### 6.1 æŒ‰é’®åˆ†ç»„

```
[ Text â–¾ ]  [ Upload Image ]  [ Image Studio ]  [ Group â–¾ ]  [ Search ]
```

| æŒ‰é’® | è¡Œä¸º |
|------|------|
| **Text â–¾** | ä¸‹æ‹‰ï¼šNotes / Brief |
| **Upload Image** | åˆ›å»º Upload Image å¡ |
| **Image Studio** | åˆ›å»º Image Studio å¡ï¼ˆEmpty çŠ¶æ€ï¼‰ |
| **Group â–¾** | è¿›å…¥æ¡†é€‰æ¨¡å¼ï¼Œä¸‹æ‹‰é€‰ç±»å‹ |
| **Search** | âŒ˜K æœç´¢ |

### 6.2 å¿«æ·é”®

| é”® | åŠ¨ä½œ |
|----|------|
| `T` | æ·»åŠ  Text Card (Notes) |
| `B` | æ·»åŠ  Text Card (Brief) |
| `U` | æ·»åŠ  Upload Image |
| `I` | æ·»åŠ  Image Studio |
| `G` | è¿›å…¥ Group æ¡†é€‰æ¨¡å¼ |
| `âŒ˜K` | æ‰“å¼€æœç´¢ |

---

## 7. å…¸å‹å·¥ä½œæµ

### 7.1 åŸºç¡€æ–‡ç”Ÿå›¾

```
Brief â†’ Image Studio â†’ ç»“æœ
```

### 7.2 é£æ ¼æå– + ç”Ÿæˆ

```
[Upload] [Upload] [Upload]
        â†“ (æ¡†é€‰)
  Style Extract Group â†’ Style Token
                              â†“
Brief â†’ Image Studio â† Style In
              â†“
          ç»“æœç½‘æ ¼
```

### 7.3 å‚è€ƒå›¾ + ç”Ÿæˆ

```
[Upload] [Upload]
      â†“ (æ¡†é€‰)
  RefSet Group â†’ RefSet Token
                       â†“
Brief â†’ Image Studio â† RefSet In
              â†“
          ç»“æœç½‘æ ¼
```

### 7.4 å›¾ç”Ÿå›¾è¿­ä»£

```
Image Studio (Generated)
    â†“ [Use current image as input â˜‘]
Image Studio (æ–°ç»“æœï¼ŒåŸºäºä¸Šä¸€å¼ )
```

---

## 8. æ•°æ®è¾“å‡ºè§„èŒƒ

### 8.1 Context Out ç»“æ„

```typescript
interface ContextOut {
  images: string[];           // URLs or base64
  prompt?: string;
  negative?: string;
  params?: {
    model: string;
    ratio: string;
    resolution: string;
    seed?: number;
    cfg?: number;
    steps?: number;
    styleStrength?: number;
    img2imgStrength?: number;
  };
  source: 'upload' | 'studio' | 'extract';
  caption?: string;           // Upload only
}
```

### 8.2 Token ç»“æ„ï¼ˆGroup è¾“å‡ºï¼‰

```typescript
interface StyleToken { palette: string[]; summary: string; embedding?: ArrayBuffer; }
interface RefSetToken { images: string[]; deduped: boolean; clusterStrength: number; }
interface CandidatesToken { images: string[]; sourceNodeId: string; }
interface ElementsToken { elements: ElementItem[]; sourceNodeId: string; }
```

---

## 9. é‡Œç¨‹ç¢‘

| é‡Œç¨‹ç¢‘ | å†…å®¹ |
|--------|------|
| **M1** | PRD v1.7 å®šç¨¿ + æ¶æ„ç¡®è®¤ |
| **M2** | Image Studio ç»„ä»¶ï¼ˆçŠ¶æ€æœº + åŒè¾“å‡ºï¼‰ |
| **M3** | Upload Image ç»„ä»¶ + Text Card ç²¾ç®€ |
| **M4** | Group Frame é€‰æ¡†å®¹å™¨ |
| **M5** | ç«¯åˆ°ç«¯å·¥ä½œæµéªŒè¯ |

---

## 10. éªŒæ”¶æ ‡å‡†

- [ ] Image Studio æ˜¯å”¯ä¸€ç”Ÿæˆç«¯ï¼Œè‡ªå¸¦ prompt + å‚æ•° + run + ç»“æœç½‘æ ¼
- [ ] ç”Ÿæˆåå¡ç‰‡è¾“å‡º **Context Out**ï¼ˆå›¾ + å‚æ•° + æ–‡æœ¬ï¼‰ï¼Œå¯å¤ç”¨
- [ ] Group æ˜¯é€‰æ¡†å®¹å™¨ï¼Œä¸æ˜¯å¤§å¡ç‰‡
- [ ] Text Card åªæœ‰ Notes + Briefï¼Œæ—  Prompt è§’è‰²
- [ ] åŒä¸€å¼  Image Studio å¡æ—¢èƒ½è¾“å‡ºä¹Ÿèƒ½ä½œä¸ºä¸‹æ¸¸è¾“å…¥ï¼ˆimg2imgï¼‰

---

## ç‰ˆæœ¬å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | å˜æ›´ |
|------|------|------|
| v1.6 | 2024-12 | Canvas-only + Typed Ports |
| v1.7 | 2024-12 | **Image Studio ç”Ÿæˆå¡ + Upload Image è¾“å…¥å¡ + Group é€‰æ¡†å®¹å™¨ + åŒè¾“å‡º(Image+Context)** |
